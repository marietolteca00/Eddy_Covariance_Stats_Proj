---
title: "EC_Final_Proj"
subtitle: "Into A Stations in Northern and Southern California Stations"
author: "Marie Tolteca"
format: html
editor: visual
---

##Import Libraries
```{r, message=FALSE}
library(tidyverse)
library(here)
library(dplyr)
library(patchwork)
```

## Importing Data
```{r}
eto <- read_csv(here("data/daily_eto_variance_CAM.csv"), 
                        show_col_types = FALSE) %>% 
  janitor::clean_names()

daily <- read_csv(here("data/daily_data_CAM.csv"),
                      # R suggested to use
                      show_col_types = FALSE) %>%
  # Helps not have 'qc...6, etc'
  janitor::clean_names()


# data <- read_csv(here("data/Camarillo_STATS.csv"), 
#                         show_col_types = FALSE) %>% 
#   janitor::clean_names()
```
# Data Cleaning
```{r}
# Dropping columns that have `qc`
drop <- c("qc_6", "qc_8")
eto[ , !(names(eto) %in% drop)]

drops <- c("qc_")
daily[ , !(names(daily) %in% drops)]

```

## There is a columnn called 'Total ETo (in)' in the dataset. The Station itself has already calculated the Evapotranspiration using the Penman-Monteith (PM) equation.

$$
ET_0 = \frac{0.408 \, \Delta \, (R_n - G) + \gamma \frac{900}{T+273} \, u_2 \, (e_s - e_a)}{\Delta + \gamma (1 + 0.34 \, u_2)}
$$

In this project I will use the *Total ETo column* as my *Response Variable*. The *predictor variables* will be *Average Air Temperature (F)* as well as *Total Precipitation (in)*

## Data Exploratory
```{r}
hist(daily$e_to_in)
hist(daily$precip_in)
```

```{r}
#summary(daily)
glimpse(daily)
names(daily)
# Viewing date column
view(daily$date)
# Data type
class(daily$date)


```

```{r}
map1<- ggplot(data = daily, aes(x = date, y = e_to_in)) +
  geom_point() +
  labs(title = "Camarillo, Daily ET Over A Year")+
  theme_linedraw()

map2<-ggplot(data = daily, aes(x = date, y = avg_air_temp_f)) +
  geom_point() +
  labs(title = "Camarillo, Daily ET Over A Year")+
  theme_linedraw()

(map1+map2)
```


```{r}
map3 <- ggplot(data = eto, aes(x = date, y = avg_e_to_in)) +
  geom_point() +
  labs(title = "Camarillo, ET Over A Year")+
  theme_linedraw()
map4 <-ggplot(data = daily, aes(x = date, y = avg_air_temp_f)) +
  geom_point() +
  labs(title = "Camarillo, Daily Temp Over A Year")+
  theme_linedraw()

(map3+map4)
```
# Joining Data
```{r}
joined_df <- left_join(eto, daily, by = "date")

head(joined_df)
```



# Creating Linear Models for each station and Interpretations
response ~ predictor
```{r}
cam_lm <- lm(total_e_to_in ~ total_precip_in + avg_air_temp_f,
               data = camarillo)

summary(cam_lm)
B0 <- cam_lm$coef[1]
B1 <- cam_lm$coef[2]
B2 <- cam_lm$coef[3]

print(paste("B0 =", B0, "(β₀): Expected ETo when both predictors = 0 (not very meaningful physically, but needed).",
            
            "| B1 (Temperature) =", B1,"Temperature): Change in monthly ETo (in inches) for every 1°F increase in mean air temperature, holding precipitation constant.", 
            
            "| B2 (Precipitation) =", B2, "Precipitation): Change in ETo for each additional inch of rainfall, holding temperature constant."))


fp_lm <- lm(total_e_to_in ~ total_precip_in + avg_air_temp_f,
               data = five_points)
summary(fp_lm)

B0_fp <- fp_lm$coef[1]
B1_fp <- fp_lm$coef[2]
B2_fp <- fp_lm$coef[3]

print(paste("B0 =", B0_fp, "(β₀): Expected ETo when both predictors = 0 (not very meaningful physically, but needed).",
            
            "| B1 (Temperature) =", B1_fp,"Temperature): Change in monthly ETo (in inches) for every 1°F increase in mean air temperature, holding precipitation constant.", 
            
            "| B2 (Precipitation) =", B2_fp, "Precipitation): Change in ETo for each additional inch of rainfall, holding temperature constant."))

```

You can add options to executable code like this

```{r}
#| echo: false
2 * 2
```

The `echo: false` option disables the printing of code (only output is displayed).
